<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Cobie — Crypto Sentiment Social (MVP Layout)</title>
<style>
  :root{
    --bg:#0b0f14; --bg2:#0a0f16; --panel:#0f1622; --ink:#e9fbff; --muted:#9ed9e6;
    --line:#173048; --accent:#00eaff; --accent2:#00bfff; --good:#14F195; --bad:#ff6b6b;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;background:radial-gradient(1200px 800px at 70% -10%,rgba(0,234,255,.08),transparent 60%),linear-gradient(180deg,#05080c,#0a0f16 40%,#05080c);
    color:var(--ink);font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial}
  a{color:var(--accent)}
  .container{max-width:1200px;margin:0 auto;padding:16px 16px 80px 16px}
  header{position:sticky;top:0;z-index:10;backdrop-filter:saturate(140%) blur(6px);
    background:linear-gradient(180deg,rgba(10,15,22,.9),rgba(10,15,22,.5));border-bottom:1px solid rgba(255,255,255,.06)}
  .h-wrap{max-width:1200px;margin:0 auto;padding:12px 16px;display:flex;align-items:center;gap:12px}

  /* === BRAND (NEU) ====================================================== */
  .brand-wrap { display:flex; align-items:center; gap:10px; }
  .brand-logo {
    width:38px; height:38px; border-radius:8px; object-fit:cover;
    border:2px solid rgba(0,234,255,0.5); box-shadow:0 0 12px rgba(0,234,255,0.4);
  }
  .brand { display:flex; align-items:baseline; gap:4px; font-weight:800; }
  .brand-main {
    font-size:20px;
    background:linear-gradient(90deg,#00eaff,#14f195,#00ffa3);
    -webkit-background-clip:text; -webkit-text-fill-color:transparent;
    animation:brandPulse 2.2s infinite ease-in-out;
  }
  .brand-sub { font-size:14px; color:#9ed9e6; }
  .brand-tag { font-size:12px; color:rgba(255,255,255,.55); font-style:italic; }
  @keyframes brandPulse{
    0%{text-shadow:0 0 2px rgba(0,234,255,.7),0 0 6px rgba(0,191,255,.4)}
    50%{text-shadow:0 0 6px rgba(0,234,255,1),0 0 16px rgba(20,241,149,.7)}
    100%{text-shadow:0 0 2px rgba(0,234,255,.7),0 0 6px rgba(0,191,255,.4)}
  }
  /* ===================================================================== */

  .spacer{flex:1}
  .status{font-size:12px;color:var(--muted);padding:6px 10px;border:1px solid rgba(255,255,255,.08);border-radius:999px}
  .btn{appearance:none;border:none;background:linear-gradient(135deg,rgba(0,234,255,.2),rgba(0,191,255,.15));color:var(--ink);
    border:1px solid rgba(255,255,255,.12);padding:10px 14px;border-radius:12px;font-weight:700;cursor:pointer;transition:.2s}
  .btn:hover{filter:brightness(1.1);transform:translateY(-1px)}
  .grid{display:grid;grid-template-columns:1.2fr .8fr;gap:16px;margin-top:16px}
  @media (max-width:980px){.grid{grid-template-columns:1fr}}
  .card{background:linear-gradient(180deg,rgba(17,24,39,.6),rgba(7,10,16,.7));
    border:1px solid rgba(255,255,255,.08);border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,.25)}
  .card h3{margin:0 0 12px 0;font-size:14px;text-transform:uppercase;letter-spacing:.8px;color:var(--muted)}
  .card .body{padding:14px}
  .divider{height:1px;background:linear-gradient(90deg,transparent,rgba(255,255,255,.08),transparent);margin:6px 0}
  /* Composer */
  .composer textarea{width:100%;min-height:90px;resize:vertical;background:#09101a;border:1px solid rgba(255,255,255,.08);color:var(--ink);
    border-radius:12px;padding:12px;font:inherit}
  .row{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
  .muted{color:var(--muted);font-size:12px}
  .chip{font-size:12px;padding:6px 8px;border-radius:999px;border:1px solid rgba(255,255,255,.08);background:rgba(255,255,255,.04)}
  .preview{margin-top:8px;display:none}
  .preview img{max-width:100%;border-radius:12px;border:1px solid rgba(255,255,255,.08)}
  .danger{color:var(--bad)}
  /* Feed */
  .post{padding:14px;display:grid;grid-template-columns:42px 1fr;gap:12px}
  .avatar{width:42px;height:42px;border-radius:12px;background:conic-gradient(from 120deg,#9945FF,#14F195,#00FFA3,#9945FF)}
  .post .meta{display:flex;align-items:center;gap:10px;color:var(--muted);font-size:12px}
  .post .text{line-height:1.55}
  .post img{max-width:100%;border-radius:12px;border:1px solid rgba(255,255,255,.08);margin-top:8px}
  .post + .divider{margin:2px 0}
  /* Right column panels */
  .gauge{--v:62;/* percent */position:relative;width:180px;height:180px;margin:auto;background:
      conic-gradient(var(--good) calc(var(--v)*1%), #ffaa00 calc(var(--v)*1%), #333 0);
    border-radius:50%;display:grid;place-items:center;border:1px solid rgba(255,255,255,.06)}
  .gauge::after{content:attr(data-label) " " attr(data-value) "%";position:absolute;inset:24px;background:#0b0f14;border-radius:50%;
    display:grid;place-items:center;color:var(--ink);font-weight:800;border:1px solid rgba(255,255,255,.08)}
  .kpi{display:grid;grid-template-columns:1fr 1fr;gap:10px}
  .kpi .box{padding:12px;border:1px solid rgba(255,255,255,.08);border-radius:12px;background:rgba(255,255,255,.03)}
  .trend-list{display:flex;flex-direction:column;gap:8px}
  .trend{display:flex;align-items:center;justify-content:space-between;padding:10px;border:1px solid rgba(255,255,255,.08);border-radius:10px;background:rgba(255,255,255,.03)}
  .spark{height:42px;width:96px}
  .inline{display:flex;align-items:center;gap:8px}
  .pill{font-size:11px;padding:4px 8px;border-radius:999px;border:1px solid rgba(255,255,255,.12)}
  .good{color:var(--good);border-color:rgba(20,241,149,.35);background:rgba(20,241,149,.07)}
  .bad{color:var(--bad);border-color:rgba(255,107,107,.35);background:rgba(255,107,107,.08)}
  footer{opacity:.6;font-size:12px;text-align:center;margin-top:16px}
</style>
</head>
<body>
  <header>
     <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.js"></script>

    <div class="h-wrap">

      <!-- BRAND ersetzt: Bild + Effekt-Schriftzug -->
      <div class="brand-wrap">
        <img src="../img/1boss.png" class="brand-logo" alt="Cobie Logo">
        <div class="brand">
          <span class="brand-main">Cobie</span>
          <span class="brand-sub">Sentiment Social</span>
          <span class="brand-tag">— MVP</span>
        </div>
      </div>

      <span id="wallet-status" class="status">Nicht verbunden</span>
      <div class="spacer"></div>
      <button id="connectBtn" class="btn">Wallet verbinden</button>
    </div>
  </header>

  <main class="container">
    <div class="grid">
      <!-- LEFT: Community / Composer / Feed -->
      <section>
        <!-- Composer -->
        <div class="card composer">
          <div class="body">
            <h3>Post verfassen</h3>
            <textarea id="postText" maxlength="140" placeholder="Was geht? (max. 140 Zeichen)"></textarea>
            <div class="preview" id="imgPreview"><img alt="Preview" id="previewImg"></div>

            <div class="row" style="margin-top:10px">
              <label class="btn" style="position:relative;overflow:hidden">
                Bild hochladen
                <input id="postImage" type="file" accept="image/*" style="position:absolute;inset:0;opacity:0;cursor:pointer" />
              </label>
              <span class="muted">Zeichen: <span id="charCount">0</span>/140</span>
              <span class="spacer"></span>
              <span class="chip">Gebühr: 0.001 SOL</span>
              <button id="postBtn" class="btn">Posten</button>
            </div>

            <div class="divider"></div>
            <div class="muted">
              <strong>Hinweis:</strong> In Phase 1 ist das nur das Layout. Zahlung (0.001 SOL) & Speicherung werden als Nächstes verdrahtet.
              <!-- TODO: Hook für Payment (Solana) + DB Save -->
            </div>
          </div>
        </div>

        <!-- Feed -->
        <div class="card" style="margin-top:12px">
          <div class="body">
            <h3>Community Feed</h3>
          </div>
          <div id="feed">
            <!-- Beispiel-Posts (werden unten via JS ergänzt) -->
          </div>
        </div>
      </section>

      <!-- RIGHT: Sentiment / Trends -->
      <aside>
        <div class="card">
          <div class="body">
            <h3>Fear & Greed</h3>
            <div id="fgGauge" class="gauge" data-label="Index" data-value="62" style="--v:62"></div>
            <div class="row" style="justify-content:center;margin-top:10px">
              <span class="pill good">Bullish</span>
              <span class="pill bad">Bearish</span>
            </div>
          </div>
        </div>

        <div class="card" style="margin-top:12px">
          <div class="body">
            <h3>Twitter / Telegram Stimmung</h3>
            <div class="kpi">
              <div class="box">
                <div class="muted">Bullish %</div>
                <div id="kpiBull" style="font-weight:800;font-size:20px">54%</div>
              </div>
              <div class="box">
                <div class="muted">Bearish %</div>
                <div id="kpiBear" style="font-weight:800;font-size:20px">46%</div>
              </div>
              <div class="box">
                <div class="muted">Mentions (24h)</div>
                <div id="kpiMentions" style="font-weight:800;font-size:20px">12.4k</div>
              </div>
              <div class="box">
                <div class="muted">Reply-Velocity</div>
                <div id="kpiVelocity" style="font-weight:800;font-size:20px">↑ Fast</div>
              </div>
            </div>
          </div>
        </div>

        <div class="card" style="margin-top:12px">
          <div class="body">
            <h3>Trending Coins</h3>
            <div class="trend-list" id="trendList">
              <!-- JS generiert Items -->
            </div>
          </div>
        </div>

        <div class="card" style="margin-top:12px">
          <div class="body">
            <h3>Sentiment Sparkline</h3>
            <canvas id="spark" class="spark" width="560" height="120" style="width:100%;height:120px"></canvas>
          </div>
        </div>
      </aside>
    </div>

    <footer>Phase 1 Layout • Nächster Schritt: Wallet-Payment (0.001 SOL) & DB-Persistenz</footer>
  </main>

<script>
  // --- Minimal Interaktionen (nur fürs Layout/Demo) -------------------------

  // === PHANTOM WALLET CONNECT ===

let provider = null;
let publicKey = null;

// Check Phantom
function getProvider() {
  if ("solana" in window) {
    const prov = window.solana;
    if (prov.isPhantom) return prov;
  }
  window.open("https://phantom.app/", "_blank");
}

async function connectWallet() {
  try {
    provider = getProvider();
    const resp = await provider.connect();
    publicKey = resp.publicKey.toString();
    
    walletStatus.textContent = "✅ " + publicKey.slice(0,4) + "..." + publicKey.slice(-4);
    connectBtn.textContent = "Disconnect";
    walletConnected = true;
  } catch (err) {
    console.error(err);
  }
}

async function disconnectWallet() {
  try {
    if (provider && provider.disconnect) {
      await provider.disconnect();
    }
    publicKey = null;
    walletStatus.textContent = "Nicht verbunden";
    connectBtn.textContent = "Wallet verbinden";
    walletConnected = false;
  } catch (err) {
    console.error(err);
  }
}

// Button Logik überschreiben
connectBtn.onclick = () => {
  if (!walletConnected) connectWallet();
  else disconnectWallet();
};


  // Wallet-Status (DUMMY): Button toggelt nur den Text, damit du UI testen kannst.
  const walletStatus = document.getElementById('wallet-status');
  const connectBtn = document.getElementById('connectBtn');
  let walletConnected = false;
  connectBtn.addEventListener('click', () => {
    walletConnected = !walletConnected;
    if(walletConnected){
      walletStatus.textContent = "✅ Verbunden (Demo)";
      connectBtn.textContent = "Disconnect";
      // TODO: Hier echte Phantom-Connect Logik aus deinem Code einhängen.
    } else {
      walletStatus.textContent = "Nicht verbunden";
      connectBtn.textContent = "Wallet verbinden";
    }
  });

  // Composer: Char Counter + Image Preview
  const txt = document.getElementById('postText');
  const cnt = document.getElementById('charCount');
  const imgInput = document.getElementById('postImage');
  const imgPreview = document.getElementById('imgPreview');
  const previewImg = document.getElementById('previewImg');
  const postBtn = document.getElementById('postBtn');
  const feed = document.getElementById('feed');

  function updateCount(){ cnt.textContent = txt.value.length; }
  txt.addEventListener('input', updateCount); updateCount();

  imgInput.addEventListener('change', (e)=>{
    const f = e.target.files?.[0];
    if(!f){ imgPreview.style.display='none'; previewImg.src=''; return; }
    const reader = new FileReader();
    reader.onload = ev => { previewImg.src = ev.target.result; imgPreview.style.display='block'; };
    reader.readAsDataURL(f);
  });

  // Fake-Post erzeugen (nur UI)
  function addPost({text, img, wallet="DEMO_WALLET", when="Gerade eben"}){
    const wrapper = document.createElement('div');
    wrapper.className = 'post';
    wrapper.innerHTML = `
      <div class="avatar" aria-hidden="true"></div>
      <div>
        <div class="meta"><strong>${wallet.slice(0,6)}...${wallet.slice(-4)}</strong><span>•</span><span>${when}</span></div>
        <div class="text">${text.replace(/</g,"&lt;")}</div>
        ${img ? `<img alt="" src="${img}" />` : ``}
      </div>
    `;
    feed.prepend(wrapper);
    const div = document.createElement('div'); div.className='divider'; feed.insertBefore(div, feed.children[1]);
  }

  // Seed: ein paar Beispielposts
  ["GM", "One more pump?", "buy the rumor, sell the news", "wen cobie?"].forEach((t,i)=>addPost({text:t, when:(i+5)+" min"}));

  postBtn.addEventListener('click', ()=>{
    // TODO: Hier 0.001 SOL Payment + DB persist integrieren
    const text = txt.value.trim();
    if(!text){ alert('Bitte Text eingeben.'); return; }
    if(text.length>140){ alert('Max 140 Zeichen.'); return; }
    // Optional: Require walletConnected in echter App
    addPost({text, img: previewImg.src || null});
    txt.value = ""; updateCount(); imgInput.value=""; imgPreview.style.display='none'; previewImg.src="";
  });

  // Fear & Greed Gauge (Demo: animiere leicht)
  const gauge = document.getElementById('fgGauge');
  let v = 62, dir = 1;
  setInterval(()=>{
    v += dir * (Math.random()*2);
    if(v>80){dir=-1} if(v<20){dir=1}
    v = Math.max(0, Math.min(100, v));
    gauge.style.setProperty('--v', v.toFixed(0));
    gauge.setAttribute('data-value', v.toFixed(0));
    document.getElementById('kpiBull').textContent = Math.round(v) + "%";
    document.getElementById('kpiBear').textContent = (100 - Math.round(v)) + "%";
  }, 1800);

  // Trending-Liste (Dummy-Daten)
  const trendData = [
    {sym:"SOL", change:+4.2}, {sym:"BTC", change:+1.1}, {sym:"BONK", change:+9.5},
    {sym:"ETH", change:-0.7}, {sym:"WIF", change:+6.3}, {sym:"TURBO", change:-2.1},
  ];
  const trendList = document.getElementById('trendList');
  trendData.forEach(t=>{
    const row = document.createElement('div');
    row.className='trend';
    row.innerHTML = `
      <div class="inline"><div style="width:10px;height:10px;border-radius:2px;background:conic-gradient(from 120deg,#9945FF,#14F195,#00FFA3,#9945FF)"></div>
      <strong>${t.sym}</strong></div>
      <div class="inline">
        <span class="pill ${t.change>=0?'good':'bad'}">${t.change>=0?'+':''}${t.change.toFixed(1)}%</span>
        <canvas class="spark" width="96" height="42"></canvas>
      </div>
    `;
    trendList.appendChild(row);
  });

  // Kleine Sparklines (Zufallskurven)
  function drawSpark(canvas){
    const ctx = canvas.getContext('2d');
    const w = canvas.width, h = canvas.height;
    ctx.clearRect(0,0,w,h);
    ctx.lineWidth = 2;
    ctx.strokeStyle = '#00eaff';
    ctx.beginPath();
    let y = h*0.6;
    ctx.moveTo(0,y);
    for(let x=0;x<w;x+=4){
      const dy = (Math.random()-0.5)*6;
      y = Math.max(6, Math.min(h-6, y + dy));
      ctx.lineTo(x,y);
    }
    ctx.stroke();
  }
  document.querySelectorAll('.spark').forEach(drawSpark);
  setInterval(()=>document.querySelectorAll('.spark').forEach(drawSpark), 4000);

  // Sentiment Sparkline groß
  const big = document.getElementById('spark');
  function drawBig(){
    const ctx = big.getContext('2d');
    const w = big.width, h = big.height;
    ctx.clearRect(0,0,w,h);
    // grid
    ctx.strokeStyle = 'rgba(255,255,255,.08)'; ctx.lineWidth=1;
    for(let i=0;i<6;i++){ const y = i*h/6; ctx.beginPath(); ctx.moveTo(0,y); ctx.lineTo(w,y); ctx.stroke(); }
    // line
    ctx.strokeStyle = '#00eaff'; ctx.lineWidth = 2;
    ctx.beginPath();
    let y = h*0.6; ctx.moveTo(0,y);
    for(let x=0;x<w;x+=6){ y = Math.max(8, Math.min(h-8, y + (Math.random()-0.5)*8)); ctx.lineTo(x,y); }
    ctx.stroke();
  }
  drawBig(); setInterval(drawBig, 5000);

  // KPI Dummies
  const kMent = document.getElementById('kpiMentions');
  const kVel = document.getElementById('kpiVelocity');
  setInterval(()=>{
    const m = (11000 + Math.random()*4000)|0;
    kMent.textContent = (m/1000).toFixed(1) + "k";
    kVel.textContent = Math.random()>.5 ? "↑ Fast" : "→ Normal";
  }, 3000);
</script>
</body>
</html>
